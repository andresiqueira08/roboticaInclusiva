<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Visualização do Mapa</title>

    <link rel="stylesheet" href="../../css/style.css">
    <link rel="stylesheet" href="../../css/mobile.css">
</head>

<body>

    <!-- TOPO -->
    <div class="top-bar">
        <div class="icon" id="btnBack">⬅</div>
        <div class="title">Mapa</div>
    </div>

    <!-- ÁREA DO MAPA (USA SEU CSS EXISTENTE) -->
    <div class="map-area">
        <img id="mapImage" src="">
        <div class="grid-line-h"></div>
        <div class="grid-line-v"></div>
    </div>

    <!-- Notificação -->
    <div class="notification" id="notification"></div>

    <!-- Scripts globais -->
    <script src="../../js/app.js"></script>

    <script>
        // Carrega o mapa salvo quando clicaram na galeria
        const mapData = localStorage.getItem("currentMap");

        if (!mapData) {
            // Se não tem mapa, volta pra galeria correta
            const user = JSON.parse(localStorage.getItem("user"));
            if (user.type === "arqueologo") {
                window.location.href = "../GaleriaArqueologos/GaleriaArqueologosScreen.html";
            } else {
                window.location.href = "../GaleriaPublico/GaleriaPublicoScreen.html";
            }
        }

        const map = JSON.parse(mapData);
        document.getElementById("mapImage").src = map.image;

        // Botão voltar
        document.getElementById("btnBack").addEventListener("click", () => {
            const user = JSON.parse(localStorage.getItem("user"));
            if (user.type === "arqueologo") {
                window.location.href = "../GaleriaArqueologos/GaleriaArqueologosScreen.html";
            } else {
                window.location.href = "../GaleriaPublico/GaleriaPublicoScreen.html";
            }
        });
    </script>

</body>
</html>
